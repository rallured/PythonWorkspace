import pylab
from generalRoutines import interpola
from generalRoutines import loadCol
from scipy import *

def applyFilter(xFilter,yFilter,xData,yData):
    yInt=interpola (xFilter,yFilter,xData)
    yData=yInt*yData
    return xData,yData

if __name__=="__main__":
    dataFile=r"C:\work\copiaOA\batch\batch4\simx2007_80kev\m2_ff015_200_max65\aree.txt"
    filterFile=r"C:\work\copiaOA\batch\batch4\simx2007_80kev\filter.txt"
    xFilter=pylab.load(filterFile)[:,0]
    yFilter=pylab.load(filterFile)[:,1]
    xData=loadCol(dataFile,0)[0]
    yData=loadCol(dataFile,1)[0]
    xFilter=xFilter/1000
    x,y= applyFilter(xFilter,yFilter,xData,yData)
    plot (x,y,'-')
    show()
    f=open("65_filtered.txt","w")
    for e1,e2 in zip(x,y):
        f.write("%s\t%s\n"%(e1,e2))
    f.close()        
        